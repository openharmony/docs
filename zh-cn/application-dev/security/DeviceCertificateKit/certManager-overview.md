# 证书管理概述

<!--Kit: Device Certificate Kit-->
<!--Subsystem: Security-->
<!--Owner: @chaceli-->
<!--Designer: @chande-->
<!--Tester: @zhangzhi1995-->
<!--Adviser: @zengyawen-->

证书管理主要提供系统级的证书管理能力，实现证书全生命周期（安装、存储、使用和销毁）的管理和安全使用。同时提供拉起证书管理对话框的接口，使应用可以通过界面查看、管理证书及凭据。

## 证书管理基本概念

- 证书：经证书授权中心（CA）数字签名的、包含公钥拥有者信息以及公钥的文件。常见的证书文件格式为X509证书。
- 凭据：指的是证书文件中公钥所对应的私钥信息。
- 密钥库：包含证书和凭据的文件。常见的密钥库文件格式为P12文件（PKCS#12）。
- 签名：使用私钥对需要传输的文件摘要进行加密得到的密文。
- 验签：用公钥对签名密文进行解密，得到文本的摘要，然后使用与发送方同样的方法对文本计算摘要值，再与解密得到的摘要做对比，二者一致则说明文本没有被篡改过。

### 证书生命周期管理概述

实现业务证书凭据和CA证书的安装、存储、使用和销毁管理，保证证书安全使用。

- 证书安装：使用者可以通过安装接口，传入证书文件或密钥库文件，实现证书的安装。

- 证书存储：证书管理模块将安装后的证书存储在证书管理服务私有目录下，对应的证书对应的私钥凭据存储在HUKS模块中。

- 证书使用：通过查询对应的证书，使用者可获取到证书文件进行业务相关操作，并可以使用证书管理服务提供接口使用证书和私钥进行签名和验签。

- 证书销毁：删除接口允许使用者，批量或单张销毁存储在证书管理中的证书和凭据。

### 证书管理对话框概述

提供拉起证书管理对话框的接口，使应用可以通过界面查看、管理证书及凭据。

- 证书查看：使用者可以拉起证书管理对话框接口，查看CA证书及凭据的列表、详情。

- 证书安装：使用者可以拉起证书管理对话框接口，从存储设备安装用户CA证书及凭据。2in1设备可以直接调用安装证书的对话框接口，对CA证书进行安装。

- 证书删除：使用者可以拉起证书管理对话框接口，删除指定的用户CA证书。2in1设备可以直接调用删除证书的对话框接口，对CA证书进行删除。

- 证书详情：对于2in1设备，使用者可以调用查看证书详情的对话框接口，展示证书的详情。

## 约束与限制

证书管理目前仅支持RSA、ECC及SM2算法类型的应用证书凭据安装及使用。

## 开发总览

证书管理为开发者提供了以下相关功能的开发指导，请开发者参照开发。

- [应用证书凭据开发指导](certManager-private-credential-guidelines.md)
- [CA证书开发指导](certManager-ca-certs-guidelines.md)
- [证书管理对话框开发指导](certManagerDialog-guidelines.md)